# ==================== Testcontainers Configuration for Podman ====================
# This configuration enables Testcontainers to work with Podman instead of Docker

# Enable container reuse for faster test execution
testcontainers.reuse.enable=true

# ==================== CRITICAL: Disable Ryuk ====================
# Ryuk (testcontainers cleanup container) has compatibility issues with Podman rootless mode
# Disabling it prevents "Could not find a valid Docker environment" errors
testcontainers.ryuk.disabled=true

# ==================== Podman Socket Configuration ====================
# Testcontainers needs to know where to find the Podman socket
# 
# Option 1: Set via environment variable (RECOMMENDED)
# systemctl --user enable --now podman.socket
# export DOCKER_HOST=unix:///run/user/$(id -u)/podman/podman.sock
# export TESTCONTAINERS_DOCKER_SOCKET_OVERRIDE=/run/user/$(id -u)/podman/podman.sock
#
# Option 2: Podman Desktop socket paths
# - macOS: unix:///Users/<username>/.local/share/containers/podman/machine/podman-machine-default/podman.sock
# - Linux: unix:///run/user/<uid>/podman/podman.sock
# - Windows: npipe:////./pipe/podman-machine-default

# ==================== Docker Client Strategy ====================
# Try multiple strategies to find Podman socket
docker.client.strategy=org.testcontainers.dockerclient.UnixSocketClientProviderStrategy,org.testcontainers.dockerclient.EnvironmentAndSystemPropertyClientProviderStrategy

# ==================== Logging ====================
# Enable logging to help debug connection issues
testcontainers.logging=true

# ==================== Container Startup ====================
# Increase timeout for slower Podman startup
testcontainers.container.startup.timeout=300